Node 入门笔记
===========

学习node的4个必备网站：

* https://nodejs.org
* https://www.npmjs.com/
* https://github.com/
* https://stackoverflow.com

Mac 安装 Node:

	brew install node
	

### 安装不同版本的node:

	npm install -g n
安装完后在终端输入安装对应的版本

	n vx.x.x

安装完后输入

	n

通过上下键可以切换不同的node版本啦



查看chrome 缓存的dns

	chrome://net-internals/#dns
	
### HTTP

* http 客户端发起请求，创建端口

* http 服务器在端口监听客户端请求

* http 服务器向客户端返回状态和内容

##### 域名解析

比如发起一个 www.imooc.com 的请求

1. Chrome浏览器搜索自身的DNS缓存
2. 如果浏览器没有找到缓存或缓存已经失效，就搜索操作系统自身的DNS缓存
3. 读取本地HOST文件
4. 浏览器发起一个DNS的一个系统调用（一般由宽带运营商提供，向宽带运营商的DNS服务器发起一个域名解析请求）
	* 宽带运营商服务器查看本身缓存
	* 运营商服务器发起一个迭代DNS解析的请求
	
			模拟一段对话：
		
			1. 首先，运营商服务器问跟域，哥们，www.imooc.com 的IP地址是多少
			2. 跟域说，我靠，我怎么知道，我只知道com域的IP地址，于是，就返回com这个顶级域的IP地址给运营商服务器
			3. 运营商找到com域，问com域，www.imooc.com 的IP地址是多少
			4. com域说，我靠，我怎么知道，我只知道imooc.com这个域的IP地址，于是，就返回imooc.com 这个域（这个一般由域名注册商提供）的IP地址给运营商
			5. 运营商找到imooc.com域，问imooc.com域，www.imooc.com 的IP地址是多少
			6. imooc.com域一查发现，我靠，还真在我这里，于是，就把 www.imooc.com 的IP地址发给运营商
	
		* 运营商服务器把结果返回操作系统内核，同时缓存起来
		* 操作系统内核把结果返回浏览器
		* 最终，浏览器拿到了www.imooc.com 对应的IP地址
5. 浏览器获得域名对应的IP地址后，发起HTTP“三次握手”
	* 浏览器以一个随机端口（比如8080）发送一个TCP连接请求
	* TCP连接请求，通过层层的路由设备到达服务器端后，进入网卡，然后进入到内核的TCP/IP协议栈，还有可能经过防火墙的过滤，最后到达Web服务端，就这样建立起连接请求
6. TCP/IP连接建立起来后，浏览器就可以向服务器发送HTTP请求了，不如：用HTTP的GET方法请求一个跟域里的一个域名，协议可以采用HTTP 1.0的一个协议。
7. 服务器端接受到了这个请求，根据路径参数，经过后端的一些处理后，把处理后的一个结果的数据返回给浏览器，如果是慕课网的页面就会把完整的HTML页面代码返回给浏览器。
8. 浏览器拿到了慕课网的完整的HTML页面代码，在解析和渲染这个页面的时候，里面的JS、CSS、图片等静态资源，他们同样也是一个HTTP请求，都需要经过上面的主要的七个步骤。
9. 浏览器根据拿到的资源对页面进行渲染，最终把一个完整的页面呈现给了用户

##### HTTP头和正文信息

* HTTP头发送的是一些附加的信息：内容类型、服务器发送响应的日期、HTTP状态码
* 正文就是用户提交的表单数据

##### 状态码

* 1xx : 请求已接收，继续处理中
* 2xx : 请求成功
* 3xx : 重定向 
* 4xx : 客户端错误，语法错误或无法实现
* 5xx : 服务器错误

常用状态码
* 200 : 请求成功
* 400 : 请求语法错误
* 401 : 请求未授权
* 403 : 没有权限，服务器拒绝服务
* 404 : 未找到
* 500 : 服务器发生了不可预知的错误
* 503 : 服务器当前不能处理客户端的请求，可能要过段时间才能恢复正常